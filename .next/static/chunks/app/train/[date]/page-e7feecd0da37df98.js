(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{9800:function(e,t,r){Promise.resolve().then(r.bind(r,5342))},8513:function(e,t,r){"use strict";var n=r(7437);r(2265),t.Z=e=>{let{children:t,type:r="button",size:a="m",isBorder:l=!1,...s}=e,i=new Map([["s","py-2 px-2 min-w-8 min-h-8 w-fit h-fit text-xs"],["m","py-2 px-4 w-fit h-fit text-sm"],["l","py-2 px-4 w-fit h-fit text-base"]]);return(0,n.jsx)("button",{...s,type:r,className:"border-2 bg-slate-200 rounded text-slate-400 inline-flex items-center justify-center	".concat(l?"rounded-full":""," ")+i.get(a),children:t})}},3054:function(e,t,r){"use strict";r.d(t,{Yv:function(){return s},fo:function(){return a},vU:function(){return l}});var n=r(9264);let a=[{name:"타겟부위",id:"target"},{name:"종목이름",id:"name"},{name:"중량(kg)",id:"weight"},{name:"횟수",id:"reps"},{name:"세트",id:"set"},{name:"비고",id:"remark"}],l={target:"",name:"",weight:0,id:"",set:0,reps:0,remark:""},s=[{data:{name:"N/A",remark:"N/A",reps:0,set:0,target:"N/A",weight:0},date:(0,n.OB)(new Date)}]},5342:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(7437),a=r(2265),l=r(1865),s=r(8513),i=r(3054),u=e=>{let{register:t,identifier:r}=e;return(0,n.jsx)("table",{className:"table-auto border-collapse border-8 border-slate-300 w-full rounded-md overflow-hidden mt-2 border-soild ring-1 ring-slate-200",children:(0,n.jsx)("tbody",{children:i.fo.map(e=>{let{name:a,id:l}=e,s="trainTable.".concat(Number(r),".").concat(l),i=["weight","reps","set"].includes(l);return(0,n.jsxs)("tr",{className:"border border-slate-300",children:[(0,n.jsx)("td",{className:"table-base",children:(0,n.jsx)("label",{htmlFor:s,children:a})}),(0,n.jsx)("td",{className:"table-base",children:(0,n.jsx)("input",{...t(s),type:i?"tel":"text",pattern:"[0-9]*",min:"1",id:s,className:"w-full text-sm"})})]},s)})})})},o=r(6691),c=r.n(o),d=r(9264),m=e=>{let{isInitialStart:t=!1,startCallback:r,endCallback:l,targetTime:s={hh:0,mm:1,ss:30}}=e,{hh:i,mm:u,ss:o}=s,m=i||0,f=u||0,h=o||0,b=3600*m+60*f+h,g=(0,a.useRef)(b),x=(0,a.useRef)(void 0),[p,v]=(0,a.useState)(!1),[j,w]=(0,a.useState)((0,d.JI)(m)),[N,y]=(0,a.useState)((0,d.JI)(f)),[I,S]=(0,a.useState)((0,d.JI)(h)),k=()=>{r&&r(),v(!0),x.current=setInterval(()=>{g.current-=1;let e=g.current,[t,r,n]=[Math.floor(e/3600),Math.floor(e%3600/60),e%60];w((0,d.JI)(t)),y((0,d.JI)(r)),S((0,d.JI)(n))},1e3)},C=()=>{clearInterval(x.current),w((0,d.JI)(m)),y((0,d.JI)(f)),S((0,d.JI)(h)),v(!1),g.current=b},J=()=>{let[e,t,r]=[3600*+j,60*+N,+I];g.current=Math.abs(e+t+r)},D=(e,t)=>{if(p)return;let r=(0,d.JI)(e);"hours"===t&&w(r),"minutes"===t&&y(r),"seconds"===t&&S(r)};return(0,a.useEffect)(()=>{t&&k()},[]),(0,a.useEffect)(()=>{g.current<0&&(C(),clearInterval(x.current),l&&l()),J()},[j,N,I]),(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("input",{type:"number",value:j,onChange:e=>D(+e.target.value,"hours"),min:0,className:"w-10 border border-slate-400 rounded-md text-center mr-1","aria-label":"hours-input"}),":",(0,n.jsx)("input",{name:"minutes",min:0,max:59,maxLength:2,type:"number",onChange:e=>D(+e.target.value,"minutes"),value:N,className:"w-10 border border-slate-400 rounded-md text-center mx-1","aria-label":"minutes-input"}),":",(0,n.jsx)("input",{name:"seconds",min:0,max:59,maxLength:2,type:"number",onChange:e=>D(+e.target.value,"seconds"),value:I,className:"w-10 border border-slate-400 rounded-md text-center ml-1","aria-label":"seconds-input"}),p?(0,n.jsx)("button",{onClick:()=>{v(!1),clearInterval(x.current)},className:"ml-2",name:"stop",role:"button",type:"button",children:(0,n.jsx)(c(),{src:"/stop-icon.svg",alt:"stop",width:12,height:12})}):(0,n.jsx)("button",{onClick:k,className:"ml-2",name:"start",role:"button",type:"button",children:(0,n.jsx)(c(),{src:"/start-icon.svg",alt:"start",width:12,height:12})})]})},f=e=>{let{date:t,handleDate:r}=e;return(0,n.jsx)("input",{type:"date",value:t,onChange:e=>r(new Date(e.target.value))})},h=r(4033),b=r(9065),g=r(2267),x=()=>{let{date:e}=(0,h.useParams)(),t=(0,h.useRouter)(),[r,o]=(0,a.useState)(""),{handleSubmit:c,register:x,control:p,setValue:v,getValues:j}=(0,l.cI)({defaultValues:{trainTable:[i.vU]}}),{fields:w,append:N,remove:y,update:I}=(0,l.Dq)({control:p,name:"trainTable"}),S=new b.Z,k=e=>{let t=w.length>1;if(!t)return alert("마지막 카드 입니다!");y(e)},C=e=>{let t="trainTable.".concat(Number(e),".set"),r=j(t);v(t,Number(r)+1)},J=()=>{var t,r;let n=S.get("iron-mate-data");if(!n)return;let a=null==n?void 0:null===(t=n.filter(t=>e===t.date))||void 0===t?void 0:t[0];null==a||null===(r=a.data)||void 0===r||r.forEach((e,t)=>I(t,e))};return(0,a.useEffect)(()=>{let r=new Date;if(e)return o(e);t.replace("/train/".concat((0,d.IH)(r)))},[e]),(0,a.useEffect)(()=>{J()},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("form",{onSubmit:c(t=>{let r=[...null==t?void 0:t.trainTable];if(r.forEach(e=>delete e.id),!(0,g.Kd)(r))return alert("적절하지 않은 데이터 형태입니다. \n(타겟부위, 종목이름, 중량 > 0, 횟수 > 0, 세트 > 0를 모두 기재해주세요)");let n=S.get("iron-mate-data");if(!n)return S.set("iron-mate-data",[{date:(0,d.OB)(new Date),data:r}]);let a=!1,l=n.reduce((t,n,l,s)=>{let i=n.date===e,u=t.map(e=>e.date).includes(n.date);return i&&!u?(a=!0,t.splice(l,1),t.push({date:n.date,data:r})):t.push(n),t},[]),s=a?l:[...l,{date:e,data:r}];return S.set("iron-mate-data",s)}),children:[(0,n.jsxs)("div",{className:"flex justify-between align-middle",children:[(0,n.jsx)(f,{handleDate:e=>{t.replace("/train/".concat((0,d.IH)(e)))},date:r}),(0,n.jsx)(s.Z,{type:"submit",className:"fixed",children:"저장하기"})]}),(0,n.jsx)("div",{className:"flex justify-end mt-4",children:(0,n.jsx)(s.Z,{onClick:()=>{N(i.vU)},type:"button",size:"m",children:"추가하기"})}),(0,n.jsx)("ul",{className:"bg-white mt-3 flex flex-col justify-center align-middle",children:w.map((e,t)=>{let{id:r}=e;return(0,n.jsxs)("li",{className:"border border-slate-300 p-3 rounded-md mb-3",children:[(0,n.jsxs)("div",{className:"flex justify-between align-middle",children:[(0,n.jsx)(m,{startCallback:()=>console.log("광고 시작"),endCallback:()=>C(t)}),(0,n.jsx)(s.Z,{className:"rounded-full border inline-flex items-center justify-center w-6 h-6",onClick:()=>k(t),type:"button",size:"s",children:"지우기"})]}),(0,n.jsx)(u,{register:x,identifier:t+""})]},r)})})]})})}},9264:function(e,t,r){"use strict";r.d(t,{IH:function(){return a},JI:function(){return n},OB:function(){return l}});let n=e=>String(e).padStart(2,"0"),a=e=>{let t=6e4*new Date().getTimezoneOffset();return new Date(e.getTime()-t).toISOString().replace("Z","").split("T")[0]},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,[t,r,a]=[e.getFullYear(),e.getMonth()+1,e.getDate()];return"".concat(t,"-").concat(n(r),"-").concat(n(a))}},9065:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});class n{constructor(){this.isClient=()=>!0,this.toast=e=>{var t;this.isClient()&&(null===(t=window)||void 0===t||t.alert(e))}}}var a=class{set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iron-mate-data",t=arguments.length>1?arguments[1]:void 0;try{localStorage.setItem(e,JSON.stringify(t)),this.customAlert.toast("브라우저 내 데이터 저장이 완료되었습니다.")}catch(e){this.customAlert.toast("브라우저 내 데이터 저장에 실패하였습니다."),console.error(e)}}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iron-mate-data";try{let t=JSON.parse(localStorage.getItem(e));return t}catch(e){this.customAlert.toast("브라우저 내 데이터 가져오기에 실패하였습니다."),console.error(e)}}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iron-mate-data";try{let t=localStorage.removeItem(e);return t}catch(e){this.customAlert.toast("브라우저 내 데이터 삭제하기에 실패하였습니다."),console.error(e)}}constructor(){this.customAlert=new n}}},2267:function(e,t,r){"use strict";r.d(t,{Kd:function(){return a},Y1:function(){return n},tL:function(){return l}});let n=e=>{let{dataKeys:t,targetKeys:r}=e,n=new Set;r.forEach(e=>n.add(e));for(let e=0;e<t.length;e++){let r=t[e];if(!n.has(r))return!1}return!0},a=e=>{for(let t=0;t<e.length;t++){let r=e[t],n=r.name&&r.target&&Number(r.set)>0&&Number(r.reps)>0&&Number(r.weight)>0;if(!n)return!1}return!0},l=e=>{var t,r;return!!e.length&&null!==(t=e.filter(e=>null==e?void 0:e.data))&&void 0!==t&&!!t.length&&null!==(r=e.filter(e=>null==e?void 0:e.date))&&void 0!==r&&!!r.length&&a(e[0].data)}}},function(e){e.O(0,[352,974,971,596,744],function(){return e(e.s=9800)}),_N_E=e.O()}]);